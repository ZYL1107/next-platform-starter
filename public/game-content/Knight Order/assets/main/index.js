System.register("chunks:///_virtual/ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./game.ts"],(function(e){var t,o,i,s,r,n;return{setters:[function(e){t=e.inheritsLoose,o=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy},function(e){n=e.default}],execute:function(){var a,l,h,c;r._RF.push({},"e9273hHtD5GTp+8yZKVA2sC","ball",void 0);var p=cc._decorator,m=p.ccclass,d=p.property;e("default",(a=d([cc.SpriteFrame]),m((h=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,i(t,"frames",c,s(t)),t.sprite=null,t.level=1,t.idx=-1,t}t(o,e);var r=o.prototype;return r.onLoad=function(){if(console.log("Ball组件加载中... 节点:",this.node.name),this.frames&&0!==this.frames.length){for(var e=0,t=0;t<this.frames.length;t++)this.frames[t]&&this.frames[t].texture?e++:(console.warn("索引 "+t+" 处的 SpriteFrame 无效！"),this.frames[t]=null);console.log("有效SpriteFrame数量:",e),this.sprite=this.getComponent(cc.Sprite),this.sprite?(this.setupTouchableNode(),console.log("Ball节点设置完成:",this.node.name)):console.error("缺少 Sprite 组件！请给节点添加一个 Sprite 组件。")}else console.error("SpriteFrame 数组为空！请在编辑器中分配 SpriteFrame。")},r.setupTouchableNode=function(){if(this.sprite.spriteFrame){var e=this.sprite.spriteFrame.getRect();this.node.setContentSize(e.width,e.height)}else this.node.setContentSize(50,50);this.node.zIndex=10,this.node.group="default",this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onTouchStart,this),this.node.active=!0,this.node.opacity=255,console.log("Ball节点触摸设置完成 - 大小:",this.node.getContentSize(),"层级:",this.node.zIndex)},r.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.MOUSE_DOWN,this.onTouchStart,this),console.log("触摸事件监听器已移除")},r.initBall=function(e){void 0===e&&(e=1),console.log("初始化小球，等级:",e,"节点:",this.node.name),this.level=e,this.idx=-1,this.nextBall()},r.onTouchStart=function(e){console.log("=== 触摸事件触发 ==="),console.log("事件类型:",e.type),console.log("节点名称:",this.node.name),console.log("游戏状态 Game.gameOver:",n.gameOver),console.log("当前球索引:",this.idx),e.stopPropagationImmediate?e.stopPropagationImmediate():e.preventDefault&&e.preventDefault(),n.gameOver?console.log("游戏已结束，忽略点击"):this.nextBall()},r.nextBall=function(){if(n.gameOver)console.log("游戏结束，忽略切换，节点:",this.node.name);else if(this.frames&&0!==this.frames.length){console.log("切换小球，当前索引:",this.idx,"可用帧数:",this.frames.length);var e=Math.min(this.level+1,this.frames.length);if(0!==e){var t,o=0,i=2*this.frames.length;do{t=Math.floor(Math.random()*e),o++}while((t===this.idx||!this.frames[t]||!this.frames[t].texture)&&o<i);o>=i&&(console.warn("警告：尝试多次后未能找到与当前不同的有效 SpriteFrame。可能会显示相同的图片或无效图片。"),-1===(t=this.frames.findIndex((function(e){return e&&e.texture}))))?console.error("严重错误：没有找到任何有效的 SpriteFrame！"):(this.idx=t,console.log("设置SpriteFrame，新索引:",this.idx),this.frames[this.idx]&&this.frames[this.idx].texture?(this.sprite.spriteFrame=this.frames[this.idx],console.log("SpriteFrame设置成功，节点:",this.node.name,"索引:",this.idx)):console.error("选定的 SpriteFrame 无效！"))}else console.error("没有可用的 SpriteFrame 可以显示！")}else console.error("SpriteFrames 数组为空或为 null！")},o}(cc.Component),c=o(h.prototype,"frames",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=h))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/ballTest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,s,i,o;return{setters:[function(e){t=e.inheritsLoose,r=e.applyDecoratedDescriptor,s=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy}],execute:function(){var n,l,c,a;o._RF.push({},"b5853hjIPNFB4jTfrTLD2L0","ballTest",void 0);var h=cc._decorator,p=h.ccclass,u=h.property;e("default",(n=u(cc.SpriteAtlas),p((c=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,s(t,"balls",a,i(t)),t.sprite=null,t.frames=[],t.currentIndex=0,t}t(r,e);var o=r.prototype;return o.onLoad=function(){if(console.log("BallTest 组件加载"),this.sprite=this.getComponent(cc.Sprite),this.sprite){if(this.balls)try{this.frames=this.balls.getSpriteFrames(),console.log("加载到",this.frames.length,"个SpriteFrame"),this.frames.length>0&&(this.sprite.spriteFrame=this.frames[0],console.log("设置初始SpriteFrame"))}catch(e){console.error("加载SpriteFrames失败:",e)}else console.error("SpriteAtlas未设置");this.node.on("touchstart",this.onClick,this),console.log("点击事件已添加")}else console.error("没有找到Sprite组件")},o.onClick=function(){console.log("小球被点击"),0!==this.frames.length?(this.currentIndex=(this.currentIndex+1)%this.frames.length,this.sprite.spriteFrame=this.frames[this.currentIndex],console.log("切换到SpriteFrame",this.currentIndex)):console.log("没有可用的SpriteFrame")},o.onDestroy=function(){this.node.off("touchstart",this.onClick,this)},r}(cc.Component),a=r(c.prototype,"balls",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=c))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ball.ts"],(function(e){var t,r,l,i,s,o;return{setters:[function(e){t=e.inheritsLoose,r=e.applyDecoratedDescriptor,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy},function(e){o=e.default}],execute:function(){var n,a,c,h,u,g,b,p,f,v,m;s._RF.push({},"e1b90/rohdEk4SdmmEZANaD","game",void 0);var B=cc._decorator,d=B.ccclass,L=B.property,C=B.UITransform,P=B.Label,y=B.Color;B.ProgressBar,e("default",(n=L(cc.Label),a=L(cc.ProgressBar),c=L(cc.Prefab),h=L(cc.Button),d(((m=function(e){function r(){for(var t,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,l(t,"label",b,i(t)),l(t,"progressBar",p,i(t)),l(t,"ball",f,i(t)),l(t,"restartButton",v,i(t)),t.totalLevel=4,t.level=0,t.ballsPerLine=4,t.maxBalls=16,t.gameTime=30,t.nowTime=0,t.ballSpacingX=150,t.ballSpacingY=150,t.ballsContainer=[],t}t(r,e);var s=r.prototype;return s.onLoad=function(){console.log("Game组件加载中..."),this.label?this.progressBar?this.ball?(this.restartButton?(this.restartButton.node.active=!1,this.restartButton.node.on("click",this.restart,this),console.log("重启按钮初始化完成")):console.error("Restart button is null!"),this.init()):console.error("Ball prefab is null! 请指定小球预制体."):console.error("ProgressBar is null! 请指定一个 ProgressBar 组件."):console.error("Label is null! 请指定一个 Label 组件.")},s.restart=function(){console.log("重新启动游戏..."),cc.director.loadScene("scene")},s.init=function(){console.log("初始化游戏..."),r.gameOver=!1,this.level=2,this.nowTime=0,this.progressBar&&(this.progressBar.progress=1),this.initMap()},s.initMap=function(){if(this.ball){console.log("开始生成小球，当前等级:",this.level,"每行球数:",this.ballsPerLine),this.ballsContainer.forEach((function(e){e&&e.node&&e.node.destroy()})),this.ballsContainer=[];var e=Math.min(this.ballsPerLine*this.level,this.maxBalls),t=Math.ceil(e/this.ballsPerLine);console.log("需要生成的小球数量:",e,"总行数:",t);for(var r=0;r<e;r++){var l=cc.instantiate(this.ball);this.node.addChild(l);var i=Math.floor(r/this.ballsPerLine),s=(r%this.ballsPerLine-(i===t-1?e-i*this.ballsPerLine:this.ballsPerLine)/2+.5)*this.ballSpacingX,n=(t/2-.5-i)*this.ballSpacingY;l.setPosition(s,n);var a=l.getComponent(C);a?a.setContentSize(70,60):console.error("小球 "+r+" 的UITransform组件获取失败");var c=l.getComponent(o);c?(this.ballsContainer.push(c),c.initBall(this.level),l.zIndex=10):console.error("小球 "+r+" 的Ball组件获取失败")}console.log("小球生成完成，总数:",this.ballsContainer.length)}else console.error("Ball prefab is null! 请指定小球预制体.")},s.levelUp=function(){console.log("升级到下一关..."),this.nowTime=0,this.level<this.totalLevel&&this.level++,this.progressBar&&(this.progressBar.progress=1),this.initMap()},s.checkOver=function(){if(0===this.ballsContainer.length)return!1;for(var e=this.ballsContainer[0].idx,t=0,r=this.ballsContainer.length;t<r;t++)if(this.ballsContainer[t].idx!==e)return!1;return console.log("所有小球索引相同，游戏过关！"),!0},s.update=function(e){if(r.gameOver)this.restartButton&&(this.restartButton.node.active=!0);else if(this.label&&this.progressBar){this.nowTime+=e;var t=(this.gameTime-this.nowTime)/this.gameTime;this.progressBar.progress=Math.max(0,t);var l=Math.floor(this.gameTime-this.nowTime);if(this.label.string="Level: "+this.level+", Remaining "+l+"s",l<=0){r.gameOver=!0,this.label.string="Level: "+this.level+", GameOver!",this.progressBar&&(this.progressBar.progress=0);var i=this.label.getComponent(P);return i&&(i.color=y.RED),void console.log("时间到，游戏结束！")}this.checkOver()&&this.levelUp()}},r}(cc.Component)).gameOver=!1,b=r((g=m).prototype,"label",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=r(g.prototype,"progressBar",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=r(g.prototype,"ball",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(g.prototype,"restartButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g))||u));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./NativeHelper.ts","./PulseEffect.ts","./SceneSetup.ts","./SceneSwitcherBar.ts","./ball.ts","./ballTest.ts","./game.ts","./resourceFixer.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NativeHelper.ts",["cc"],(function(t){var e,c,i,o;return{setters:[function(t){e=t.cclegacy,c=t._decorator,i=t.sys,o=t.native}],execute:function(){var a;e._RF.push({},"43103MGXTxN2oGqztCxkka0","NativeHelper",void 0);var n=c.ccclass;t("NativeHelper",n("NativeHelper")(a=function(){function t(){}return t.setLandscape=function(){i.isNative&&i.os===i.OS.ANDROID&&o.reflection.callStaticMethod("com/cocos/game/AppActivity","setOrientation","(I)V",0)},t.setPortrait=function(){i.isNative&&i.os===i.OS.ANDROID&&o.reflection.callStaticMethod("com/cocos/game/AppActivity","setOrientation","(I)V",1)},t}())||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/PulseEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,a,t,s,n,l,o,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,a=e.inheritsLoose,t=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Vec3,u=e.Component}],execute:function(){var c,r,p,h,m,y,f,d,S,g,P,b,v;n._RF.push({},"9b6ebbkxEtJGJ8/QktXyMuw","PulseEffect",void 0);var x=l.ccclass,w=l.property;e("PulseEffect",(c=x("PulseEffect"),r=w({displayName:"最小缩放",tooltip:"脉冲动画的最小缩放比例"}),p=w({displayName:"最大缩放",tooltip:"脉冲动画的最大缩放比例"}),h=w({displayName:"动画速度",tooltip:"脉冲动画的速度倍数"}),m=w({type:cc.Enum(["linear","ease-in","ease-out","ease-in-out","sine"]),displayName:"缓动类型",tooltip:"动画的缓动效果类型"}),y=w({displayName:"自动播放",tooltip:"组件加载后是否自动开始播放动画"}),c((S=i((d=function(e){function i(){for(var i,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return i=e.call.apply(e,[this].concat(n))||this,t(i,"minScale",S,s(i)),t(i,"maxScale",g,s(i)),t(i,"speed",P,s(i)),t(i,"easing",b,s(i)),t(i,"autoPlay",v,s(i)),i.initialScale=new o,i.pulseTime=0,i.isPlaying=!1,i.isPaused=!1,i.easingNames=["linear","ease-in","ease-out","ease-in-out","sine"],i}a(i,e);var n=i.prototype;return n.onLoad=function(){this.initialScale.set(this.node.getScale()),this.autoPlay&&this.play()},n.applyEasing=function(e,i){switch(i){case"linear":return e;case"ease-in":return e*e;case"ease-out":return e*(2-e);case"ease-in-out":return e<.5?2*e*e:(4-2*e)*e-1;case"sine":default:return Math.sin(e*Math.PI)}},n.calculateScale=function(){var e=.5*Math.sin(this.pulseTime*this.speed)+.5,i=this.easingNames[this.easing]||"sine",a=this.applyEasing(e,i);return this.minScale+(this.maxScale-this.minScale)*a},n.applyScale=function(){var e=this.calculateScale();this.node.setScale(this.initialScale.x*e,this.initialScale.y*e,this.initialScale.z)},n.update=function(e){this.isPlaying&&!this.isPaused&&(this.pulseTime+=e,this.applyScale())},n.play=function(){this.isPlaying=!0,this.isPaused=!1,this.pulseTime=0},n.stop=function(){this.isPlaying=!1,this.isPaused=!1,this.pulseTime=0,this.node.setScale(this.initialScale)},n.pause=function(){this.isPaused=!0},n.resume=function(){this.isPlaying&&(this.isPaused=!1)},n.setConfig=function(e){if(void 0!==e.minScale&&(this.minScale=e.minScale),void 0!==e.maxScale&&(this.maxScale=e.maxScale),void 0!==e.speed&&(this.speed=e.speed),void 0!==e.easing){var i=this.easingNames.indexOf(e.easing);-1!==i&&(this.easing=i)}void 0!==e.autoPlay&&(this.autoPlay=e.autoPlay,e.autoPlay&&!this.isPlaying&&this.play())},n.getStatus=function(){return{isPlaying:this.isPlaying,isPaused:this.isPaused,time:this.pulseTime}},n.resetInitialScale=function(){this.initialScale.set(this.node.getScale())},n.setPulseTime=function(e){this.pulseTime=e},n.onDestroy=function(){this.stop()},i}(u)).prototype,"minScale",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=i(d.prototype,"maxScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),P=i(d.prototype,"speed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=i(d.prototype,"easing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),v=i(d.prototype,"autoPlay",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=d))||f)),e("PulsePresets",{gentle:{minScale:1,maxScale:1.05,speed:3,easing:"sine",autoPlay:!0},moderate:{minScale:1,maxScale:1.15,speed:5,easing:"ease-in-out",autoPlay:!0},strong:{minScale:1,maxScale:1.3,speed:8,easing:"sine",autoPlay:!0},heartbeat:{minScale:1,maxScale:1.1,speed:6,easing:"ease-out",autoPlay:!0},breathing:{minScale:.95,maxScale:1.05,speed:2,easing:"ease-in-out",autoPlay:!0}});n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceFixer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e.cclegacy}],execute:function(){var o;n._RF.push({},"92caeperPBCqqCvCPSEpuCY","resourceFixer",void 0);var t=cc._decorator,c=t.ccclass;t.property,e("default",c(o=function(e){function n(){return e.apply(this,arguments)||this}r(n,e);var o=n.prototype;return o.onLoad=function(){var e=this;this.scheduleOnce((function(){e.fixResourceReferences()}),.1)},o.fixResourceReferences=function(){console.log("开始检查和修复资源引用...");var e=cc.find("Canvas").getComponentsInChildren(cc.Sprite);console.log("找到Sprite组件数量:",e.length),e.forEach((function(e,r){e&&e.spriteFrame?e.spriteFrame.texture?console.log("Sprite "+r+" 的SpriteFrame有效"):(console.warn("Sprite "+r+" 的SpriteFrame无效，禁用该组件"),e.enabled=!1):console.warn("Sprite "+r+" 没有SpriteFrame")}));var r=cc.find("Canvas").getComponentsInChildren("Ball");console.log("找到Ball组件数量:",r.length),r.forEach((function(e,r){if(e&&e.balls)try{var n=e.balls.getSpriteFrames();n&&0!==n.length?console.log("Ball "+r+" 的SpriteAtlas有效，包含 "+n.length+" 个帧"):console.warn("Ball "+r+" 的SpriteAtlas无效")}catch(e){console.error("Ball "+r+" 的SpriteAtlas访问出错:",e)}else console.warn("Ball "+r+" 没有SpriteAtlas")})),console.log("资源引用检查完成")},n}(cc.Component))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneSetup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NativeHelper.ts"],(function(e){var t,n,i,o,r,s,a,c,u,l,p,S,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Enum,c=e.view,u=e.ResolutionPolicy,l=e.sys,p=e.screen,S=e.Component},function(e){A=e.NativeHelper}],execute:function(){var R,O,f,D,L;r._RF.push({},"5aaeaXHWHZCeYACyL+wz451","SceneSetup",void 0);var P=s.ccclass,y=s.property,v=function(e){return e[e.PORTRAIT=0]="PORTRAIT",e[e.LANDSCAPE=1]="LANDSCAPE",e}(v||{});a(v);e("SceneSetup",(R=P("SceneSetup"),O=y({type:v,tooltip:"设置当前场景期望的屏幕方向。\nPORTRAIT: 竖屏 (720x1280)\nLANDSCAPE: 横屏 (1280x720)"}),R((L=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"orientation",L,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.setupScene()},r.setupScene=function(){this.orientation===v.LANDSCAPE?(c.setDesignResolutionSize(1280,720,u.SHOW_ALL),l.isNative&&l.os===l.OS.ANDROID?A.setLandscape():p.setOrientation(p.Orientation.LANDSCAPE),console.log("场景已设置为横屏：1280x720")):(c.setDesignResolutionSize(720,1280,u.SHOW_ALL),l.isNative&&l.os===l.OS.ANDROID?A.setPortrait():p.setOrientation(p.Orientation.PORTRAIT),console.log("场景已设置为竖屏：720x1280"))},t}(S)).prototype,"orientation",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.PORTRAIT}}),f=D))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/SceneSwitcherBar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,o,i,c,a,s,l,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,a=e.ProgressBar,s=e.tween,l=e.director,p=e.Component}],execute:function(){var u,h,f,g,S,y,d;i._RF.push({},"28b0eBM1cZJKqz6YAU6OSYg","SceneSwitcherBar",void 0);var w=c.ccclass,B=c.property;e("SceneSwitcher",(u=w("SceneSwitcher"),h=B({type:String,tooltip:"要跳转到的目标场景名称"}),f=B({type:a,tooltip:"用于显示加载进度的进度条"}),u((y=r((S=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return r=e.call.apply(e,[this].concat(i))||this,n(r,"sceneName",y,o(r)),n(r,"progressBar",d,o(r)),r}t(r,e);var i=r.prototype;return i.onLoad=function(){var e=this;this.progressBar?(this.progressBar.progress=0,s(this.progressBar).to(2,{progress:1},{onUpdate:function(e,r){}}).call((function(){e.loadNewScene()})).start()):console.warn("未关联进度条组件，无法显示进度！")},i.loadNewScene=function(){this.sceneName?l.loadScene(this.sceneName):console.error("场景名称未设置，无法跳转！")},r}(p)).prototype,"sceneName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=r(S.prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S))||g));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});