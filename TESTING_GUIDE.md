# 游戏详情页功能测试指南

## 测试环境

开发服务器已成功启动：
- 本地地址：http://localhost:3000
- 状态：✅ 无编译错误

## 功能清单

### 1. 游戏列表页（已更新）
**测试路径：** http://localhost:3000/games

**测试步骤：**
1. 访问游戏列表页
2. 查看所有游戏卡片是否正常显示
3. 确认按钮文字已更新为"查看详情"（而不是"开始游戏"）
4. 点击任意游戏卡片

**预期结果：**
- 页面跳转到游戏详情页 `/games/[gameId]`

---

### 2. 游戏详情页（新功能）
**测试路径：** http://localhost:3000/games/Bunny%20Leap

**测试步骤：**
1. 从游戏列表点击任意游戏，或直接访问游戏详情页
2. 查看页面是否包含以下部分：
   - ✅ 返回按钮（返回游戏列表）
   - ✅ 游戏信息卡片（缩略图、名称、描述、标签）
   - ✅ 评分区域（平均分、评分分布条形图）
   - ✅ 评论区域（评论轮播、写评论按钮）
   - ✅ 开始游戏按钮（跳转到游戏播放页）

**预期结果：**
- 所有组件正确渲染
- 初始状态显示"暂无评论"提示
- 评分显示为 0.0，0 个评分

---

### 3. 评分功能
**测试步骤：**
1. 在游戏详情页点击"写评论"按钮
2. 查看评论表单是否展开
3. 填写表单：
   - 昵称：输入测试昵称（如"测试玩家001"）
   - 评分：点击星星选择评分（1-5星）
   - 评论内容：输入至少5个字的评论

**测试用例：**

#### 用例 3.1：表单验证
- 不填昵称，直接提交 → 应显示错误："请输入昵称"
- 不选择评分，直接提交 → 应显示错误："请选择评分"
- 评论少于5个字，提交 → 应显示错误："评论至少需要5个字"

#### 用例 3.2：成功提交
1. 填写完整信息
2. 点击"提交评论"
3. 等待提交完成

**预期结果：**
- ✅ 显示"提交中..."加载状态
- ✅ 提交成功后表单自动清空
- ✅ 表单自动关闭
- ✅ 新评论立即显示在评论轮播中
- ✅ 评分统计立即更新

---

### 4. 评论轮播功能
**测试步骤：**
1. 提交至少 2-3 条评论
2. 观察评论轮播行为

**测试用例：**

#### 用例 4.1：自动轮播
- 等待 5 秒，评论应自动切换到下一条
- 再等待 5 秒，继续切换

#### 用例 4.2：手动控制
- 点击左箭头按钮 → 切换到上一条评论
- 点击右箭头按钮 → 切换到下一条评论
- 点击指示器（下方的圆点）→ 跳转到对应评论

#### 用例 4.3：暂停/继续播放
- 点击"暂停自动播放"按钮 → 自动轮播停止
- 点击"继续自动播放"按钮 → 自动轮播恢复

**预期结果：**
- ✅ 轮播功能正常工作
- ✅ 手动操作后自动播放暂停
- ✅ 指示器正确高亮当前评论

---

### 5. 评分统计功能
**测试步骤：**
1. 提交多条不同评分的评论（1星、3星、5星等）
2. 刷新页面
3. 查看评分区域

**测试用例：**

#### 用例 5.1：平均分计算
- 提交 1 条 5 星评论 → 平均分应显示 5.0
- 再提交 1 条 3 星评论 → 平均分应更新为 4.0
- 再提交 1 条 2 星评论 → 平均分应更新为 3.3

#### 用例 5.2：评分分布
- 条形图应显示各星级的数量
- 百分比应正确计算（如 1 条 5 星 / 3 条总数 = 33.3%）

**预期结果：**
- ✅ 平均分计算准确
- ✅ 评分总数正确
- ✅ 分布条形图正确显示

---

### 6. 游戏播放页（已更新）
**测试路径：** http://localhost:3000/games/Bunny%20Leap/play

**测试步骤：**
1. 在详情页点击"开始游戏"按钮
2. 查看页面是否正常加载游戏
3. 点击左上角"返回详情"按钮

**预期结果：**
- ✅ 跳转到游戏播放页 `/games/[gameId]/play`
- ✅ 游戏正常加载和运行
- ✅ "返回详情"按钮跳转回详情页（而不是游戏列表）

---

### 7. 数据持久化测试
**测试步骤：**
1. 在游戏 A 提交评论
2. 访问游戏 B 提交评论
3. 返回游戏 A
4. 刷新页面

**预期结果：**
- ✅ 每个游戏的评论相互独立
- ✅ 刷新页面后评论仍然存在
- ✅ 评分统计保持正确

---

### 8. 响应式设计测试
**测试步骤：**
1. 在桌面浏览器查看详情页
2. 调整浏览器窗口大小（模拟平板、手机）
3. 查看布局是否适配

**测试断点：**
- 桌面（>1024px）：两列布局（缩略图 + 信息）
- 平板（768-1024px）：单列布局，评分区域两列
- 手机（<768px）：单列布局，所有元素垂直排列

**预期结果：**
- ✅ 布局自动适配不同屏幕尺寸
- ✅ 所有内容可读，无横向滚动
- ✅ 按钮和表单元素在移动设备上可点击

---

## 测试数据准备

### 测试用例数据：
```
游戏ID: Bunny Leap
测试评论数据：

评论 1:
- 昵称: 玩家小明
- 评分: 5 星
- 内容: 这个游戏太好玩了！跳跃手感很棒，画面也很可爱！

评论 2:
- 昵称: 游戏达人
- 评分: 4 星
- 内容: 整体不错，但难度有点高，新手可能需要练习。

评论 3:
- 昵称: 休闲玩家
- 评分: 5 星
- 内容: 很适合打发时间，音效和画面都很棒！

评论 4:
- 昵称: 测试用户
- 评分: 3 星
- 内容: 还不错，但希望能有更多关卡和道具。
```

---

## 已知问题排查

### 问题 1：评论提交失败
**可能原因：**
- Netlify Blobs 未正确配置
- 网络连接问题

**解决方法：**
- 检查 `@netlify/blobs` 依赖是否安装
- 确认在 Netlify 环境中运行（本地开发可能需要 Netlify CLI）
- 查看浏览器控制台错误信息

### 问题 2：图片显示异常
**可能原因：**
- 游戏的 `game.json` 中 `thumbnail` 路径错误
- 图片文件不存在

**解决方法：**
- 检查 `public/games/[gameId]/game.json` 中的 `thumbnail` 字段
- 确认图片文件存在于指定路径
- 使用默认 SVG 占位符

### 问题 3：评论轮播不工作
**可能原因：**
- JavaScript 未启用
- React Hydration 错误

**解决方法：**
- 检查浏览器控制台错误
- 确认组件正确标记为 `'use client'`

---

## 性能测试

### 加载时间测试
1. 打开浏览器开发者工具（F12）
2. 切换到 Network 标签
3. 访问游戏详情页
4. 记录 DOMContentLoaded 和 Load 时间

**预期性能：**
- 首次加载（冷启动）：< 3 秒
- 后续加载（热加载）：< 1 秒

### 评论提交性能
1. 填写评论表单
2. 点击提交
3. 记录从点击到页面更新的时间

**预期性能：**
- 提交响应时间：< 2 秒
- UI 更新时间：< 500ms

---

## 测试完成标准

所有以下项目必须通过：

- ✅ 游戏列表页显示正常，链接更新
- ✅ 游戏详情页所有组件渲染正确
- ✅ 评论表单验证正常工作
- ✅ 评论成功提交并保存到 Netlify Blobs
- ✅ 评论轮播自动播放和手动控制正常
- ✅ 评分统计计算准确
- ✅ 评分分布条形图显示正确
- ✅ 数据在刷新后持久化
- ✅ 不同游戏的评论相互独立
- ✅ 响应式布局在各种设备上正常
- ✅ 游戏播放页跳转和返回正常
- ✅ 无 JavaScript 错误或警告

---

## 部署前检查清单

在部署到 Netlify 前，请确认：

- [ ] 所有功能在本地开发环境测试通过
- [ ] 代码已提交到 Git 仓库
- [ ] `package.json` 中 `@netlify/blobs` 依赖已添加
- [ ] 无 TypeScript/ESLint 错误
- [ ] `npm run build` 构建成功
- [ ] 环境变量配置正确（如有）
- [ ] Netlify Blobs 存储权限配置正确

---

## 下一步计划

测试通过后，可以考虑以下扩展功能：

1. **用户系统**：集成 Netlify Identity 进行真实用户认证
2. **评论点赞**：为评论添加点赞功能
3. **���论回复**：支持玩家之间互相回复
4. **评论审核**：管理员后台审核不当评论
5. **数据分析**：游戏热度排行榜、玩家活跃度统计
6. **分享功能**：分享游戏到社交媒体
7. **收藏功能**：玩家可以收藏喜欢的游戏

---

**测试日期：** 2025-10-25
**测试人员：** Claude Code
**测试状态：** 🟢 开发完成，等待用户测试
